<div class="container">
    <div class="search-container">
        <h2> Rechercher un vol</h2>
        <div class="search-fields">
            <div class="searching-form">
                <div class="search.airport">
                    <input class="search" list="airports_dep" [(ngModel)]="selectedDeparture"
                        (ngModelChange)="onSearchChange('departure')" placeholder="DÃ©part" />
                    <datalist id="airports_dep">
                        <option *ngFor="let location of flightLocationsDeparture" [value]="location.iataCode">
                            {{ location.iataCode }} - {{ location.name }}
                        </option>
                    </datalist>
                </div>
                <div class="search.airport">
                    <input class="search" list="airports_arr" [(ngModel)]="selectedArrival"
                        (ngModelChange)="onSearchChange('arrival')" placeholder="ArrivÃ©e" />
                    <datalist id="airports_arr">
                        <option *ngFor="let location of flightLocationsArrival" [value]="location.iataCode">
                            {{ location.iataCode }} - {{ location.name }}
                        </option>
                    </datalist>
                </div>

                <div>
                    <input type="date" class="search_date" [(ngModel)]="departureDate" placeholder="Date de dÃ©part" />
                </div>

                <div>
                    <input type="date" class="search_date" [(ngModel)]="returnDate" placeholder="Date de retour" />
                </div>

                <div>
                    <input type="number" class="search passenger-count" [(ngModel)]="numberOfPassengers" min="1" max="10" placeholder="1" />
                </div>

                <label class="escale-checkbox">
                    <input type="checkbox" [(ngModel)]="stopover" />
                    Escale
                </label>

                <button class="search-button" (click)="searchFlights()">
                    <i class="fas fa-search"></i>
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
                </button>
                <p *ngIf="messageRecherche" style="color: red;">{{ messageRecherche }}</p>
            </div>
        </div>
    </div>
</div>

<div *ngIf="searchCompleted" class="results">
    <div>
        <ul>
            <li *ngFor="let flight of flights; let i = index">
                <ul>
                    <li *ngFor="let itinerary of flight.itineraries; let j = index">
                        <h4>ðŸ›¤ Itinerary {{ j + 1 }}</h4>
                        <ul>
                            <li *ngFor="let segment of itinerary.segments">
                                <strong>ðŸ“… DÃ©part : {{ segment.departure.at }} de {{ segment.departure.iataCode }} â†’ ðŸ“… ArrivÃ©e : {{ segment.arrival.at }} Ã  {{ segment.arrival.iataCode }}</strong>
                            </li>
                            <p>ðŸ’° Prix : {{ flight.price.total }} {{ flight.price.currency }}</p>
                        </ul>
    
                    </li>
                </ul>
            </li>
        </ul>
    
        <!-- <button mat-raised-button color="warn" class="return-button" (click)="resetSearch()">ðŸ”™ Retour Ã  la recherche</button> -->
    </div>

</div>
